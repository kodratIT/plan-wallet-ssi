@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title System Context Diagram - Credential Management (Sprint 2)
caption As the Wallet Creator: Complete Credential Ecosystem View

LAYOUT_WITH_LEGEND()

Person(user, "Wallet User", "Pemilik wallet yang menerima dan mengelola credentials")

System_Boundary(wallet, "Sphereon Mobile Wallet") {
    System(credMgmt, "Credential Management", "Mengelola lifecycle lengkap credentials: \n- Issuance\n- Storage\n- Presentation\n- Organization\n- Export/Share")
}

System_Ext(issuer1, "University Issuer", "Menerbitkan academic credentials\n(degree, diploma, transcript)")
System_Ext(issuer2, "Government Issuer", "Menerbitkan identity credentials\n(ID card, passport, license)")
System_Ext(issuer3, "Corporate Issuer", "Menerbitkan professional credentials\n(employment, certification)")

System_Ext(verifier1, "Employer Verifier", "Memverifikasi educational & professional credentials")
System_Ext(verifier2, "Financial Verifier", "Memverifikasi identity & income credentials")

System_Ext(ocaRegistry, "OCA Registry", "Menyediakan OCA bundles untuk credential rendering")
System_Ext(manifestRegistry, "Credential Manifest Registry", "Menyediakan credential manifests")
System_Ext(schemaRegistry, "Schema Registry", "Menyediakan credential schemas")

' Credential Issuance Flows
Rel(issuer1, credMgmt, "Issues credentials\nvia OID4VCI", "HTTPS/OpenID4VCI")
Rel(issuer2, credMgmt, "Issues credentials\nvia OID4VCI", "HTTPS/OpenID4VCI")
Rel(issuer3, credMgmt, "Issues credentials\nvia DIDComm", "DIDComm v2")

' User interactions
Rel(user, credMgmt, "Manages credentials:\n- View\n- Organize\n- Search\n- Export\n- Share", "Mobile App")

' Credential Presentation Flows
Rel(credMgmt, verifier1, "Presents credentials\nvia OID4VP", "HTTPS/OpenID4VP")
Rel(credMgmt, verifier2, "Presents credentials\nvia DIDComm", "DIDComm v2")

' Registry integrations
Rel(credMgmt, ocaRegistry, "Fetches OCA bundles", "HTTPS")
Rel(credMgmt, manifestRegistry, "Fetches credential manifests", "HTTPS")
Rel(credMgmt, schemaRegistry, "Resolves schemas", "HTTPS")

' Issuer to registry
Rel(issuer1, manifestRegistry, "Registers manifests", "HTTPS")
Rel(issuer2, ocaRegistry, "Registers OCA bundles", "HTTPS")

SHOW_LEGEND()

note right of credMgmt
**Sprint 2 Focus:**
• Credential Manifest protocol
• OCA rendering for beautiful cards
• Enhanced card UI with animations
• Search & filter functionality
• Categories & organization
• Export (JSON, QR, PDF)
• Share via multiple channels
• Activity history tracking
• Favorites system
end note

note left of ocaRegistry
**OCA (Overlay Capture Architecture):**
Provides visual styling overlays:
• Branding (colors, logos)
• Labels (multilingual)
• Format (data formatting)
• Character encoding
end note

note right of manifestRegistry
**Credential Manifest:**
Describes credential structure:
• Output descriptors
• Presentation requirements
• Display metadata
• Application format
end note

@enduml
